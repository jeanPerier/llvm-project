How to cherry-pick commits from f18-stage to llvm-project

Do once:
  git clone https://github.com/llvm/llvm-project.git $DIRECTORY
  cd $DIRECTORY
  git remote add f18-stage ssh://git@gitlab-master.nvidia.com:12051/fortran/f18-stage.git


To look for changes to merge from NVIDIA to LLVM:
  git fetch f18-stage # or --all
  git log f18-stage/master >log.tmp
  $EDITOR log.tmp nvidia-to-llvm.txt
# Look for new commits, add to log below
# Ignore merge commits and changes to cherrypicking.txt.

For each change to merge:
  git checkout master
  git pull
  git checkout -b $BRANCH
  git -c merge.renameLimit=1 cherry-pick -n $COMMIT
  git commit
# build and test
  arc diff
# set Subscribers: flang-commits and Tags: #flang
# get it approved in phabricator
  arc land --hold $BRANCH
  git commit --amend # clean up the commit message
  git show -s # get the new HEAD commit number as $AMENDEDHEAD
  git push -- origin $AMENDEDHEAD:master
  git checkout master
  git pull
  git checkout $BRANCH
  git rebase -i master # ensure that changes are now "no-op"
  git checkout master
  git branch -D $BRANCH

To do (oldest last):
499fdc0bfcd6d429ced29d629b09b9d08ea1f783 Anonymous external I/O units (fm401)
0917928b904cd7e63fc862901860dc3ce2d6971a Fix CR handling (fix)
e25472e0d6bbe641a562927f53ef29c73c9d3673 Fix CR handling
eb74a903396ff81dc23dcbd9c5dbc06dca528e86 Speed up real binary->dec

In review:

Done (oldest last, omitting no-ops):
a52fdfdd9aebbefc61d3e664565ecc77322a47ac fix shared lib build
d95b91d77e1f40edfe7bf89eaea58fbe0744a39f fix unit number hash
60c58f58ba6048d0c1c5b1324d4b5bedc6dc9f73 Fix lowering bug #230
446c41b0c944fd9dff1d872c5c4459e8e9cbe53d Clean up runtime binary deps
9b8b332822221a409cc2e81b6fc3bd51a91cdb03 EQUIVALENCE fixes
acba890a16e6d2b26db1aefb5c17c9822f7ba26a Defer stmt func body analysis
dab72aa39d4c403adf4da5c819b32e4e9860c687 shape analysis of MATMUL
9ed81c9450a108357e21a0e82adca7070d6ddad1 fix F5.3 formatting of 0.025
831c6f18c405147ef36115e4239ce928ca78a165 DATA: processing & conversion to inits
008bd342b28bd46960b2214b58977f1bd4b473a0 DATA: remaining prep work
de3188d0c93ccf6850c0c9c0f7d21284ab30baeb DATA: initial images
7d8047a25f8bb2a07ba639d4d90caa11bb64bf42 DATA: designator folding
082c73c3467d7c02471fca9ec93167345c1856f0 roll-up small runtime fixes
21ea58e02d5aea966f5d393025d44d9ff56b0a95 fix osx build problems
049e7e5b79b357f3a4a24fbfdf2ce5d263f74ef2 + more CHARACTER runtime
cd2ce94f9c59d887ce84092d1eb970ade5fc32c4 Fix to IsDescriptor()
266e4b21f17b91d1a844ffa734af478df96d9038 Equivalence & common offsets
f5989ad96f2290e4d276a12c75591bb53be55b6c Add equivalence & common accessors
91585b69a235cc9cfe6bd7820544d2ea0b9b93a7 Fix x87 binary->decimal
baeff4139d3b6468790fb5ba999d74469d12f63d DATA statement rework
ed6d92af6bc65d917cd1243b314989a0017363d4 CHARACTER runtime

Not forwarded to LLVM:
3216cf630345f4378783115b86cf89f68989091d Typed blobs
ab2dac0035620cf281871116cb5adeda49a26b52 fix build breakage
