How to cherry-pick commits from llvm-project into f18-stage

Do once:
  git clone ssh://git@gitlab-master.nvidia.com:12051/fortran/f18-stage.git $DIRECTORY
  cd $DIRECTORY
  git remote add llvm-project https://github.com/llvm/llvm-project.git

For each round of cherry-picking:
  git fetch llvm-project # or git fetch --all
  git checkout $BRANCH

If you want to see which files have diverged:
  git diff --name-status refs/remotes/llvm-project/master HEAD -- flang

To look for changes to merge from LLVM to NVIDIA:
  git log ${LATEST_CHERRYPICK_COMMIT}..llvm-project/master -- flang >log.tmp
  $EDITOR log.tmp llvm-to-nvidia.txt

Look for new flang commits since the latest (top) entry in the log below.
Add them to the "Commits to be cherry-picked" list below
(or "Not cherry-picked" if you think they should not be).

For each commit that you want to pick:
  $EDITOR llvm-to-nvidia.txt
  git cherry-pick -x $COMMIT
  # If the commit modifies files outside f18 (e.g., llvm/* & mlir/*),
  # the cherry-pick will fail.  Use "git rm -r -f llvm" or "mlir"
  # to clean up, then "git cherry-pick --continue".

Build and test.  If successful, move the newly picked commits
to the "Log of cherry-picked commits" list below.
  $EDITOR llvm-to-nvidia.txt
  git add llvm-to-nvidia.txt
  git commit -m '...'
  git push

Create a merge request for your branch.

To see a description of a commit without its diff:
  git show -s $COMMIT

The out-of-tree build & test of these changes was conducted
with llvm-project a39e9cf6bec4e7c8e2e947972421c1d5a6f473d6

Log of cherry-picked commits in reverse order (latest first):
a39e9cf6bec4e7c8e2e947972421c1d5a6f473d6 tidying ext. I/O change
98d576c78f88b6d7191335c9774313c191ef7539 tidying ext. I/O change
35808ab8e18cea0a668ea91786a3d916618e986e Eric: FIRBuilder.cpp
eb305631bec6bf6765c44dcfbb7ec9e8eca41be4 Jean: pgmath
70f2bcc197ebc8d1c77c5efd5b822a9c9ccdccc4 Tim: alt return fix
5c02a2421b951a14d1294598d0082b32659c7082 Eric: inliner
ffa1f8198e6e8be6ca1044975a67e646188210da Eric: tablegen
2ddba3082ca79080b14f372ebe4b5bdbc5f694ed Val C. use llvm/Frontend OMP stuff
05756e6937d58c357b0b7e37ff3e9a8f7dd0d485 Tim: alt returns
dd904082625b4fd83f90647952dabee93ef5e990 Tim: formatting
5a580bbb818737dcbfcfc2089532c38b670ef204 Eric: Runtime.h
f625f5231ab8e76b1367f70aeed56b6389d83471 mlir thing
98202edacbad2370105b8a5b837ad35569d7a387 Tim: clang-tidy silencing
bd2c3014e120949c4acc1d107ac71c4091f00a3d Eric: coarray hooks
b537c81b5fde154062ecf7521d41902b130dffe6 Barton: testing churn
ae74252341a0e985a3b637c9b6c30aed9b6f033b Barton: testing churn
bf57fc1c8ea3d8eaf2e9974691012767ac71a73e Barton: testing churn
66c26d93b7be0e1cbd5e1c7615a0f591c975fd27 Barton: testing churn
9c98ed9cd41fc6662a5e90037f25cb3a80658b74 Barton: testing churn
4198874630be5c6126d78944f8a2d89dea90c7c4 LLVM_ATTRIBUTE_UNUSED
c3477c51e5995983b9f837c1cd9e7528a5b1bdb2 Eric: CHARACTER work
84f380580531d4f44fb3e4a2d17b5033e1e9bb0b Eric: add RTBuilder.h
a9c478acd090bfdb162573af09e777571f8ae1d7 Eric: MLIR .clang-tidy
663860f63e73518fc09e55a4a68b03f8027eafc8 Tim: fix SAVE checking
16d24e45430c930e8f5f0aedc99b262fcdf35d26 no-op: shape analysis for MATMUL
3a84d84adcd59e62f37792b1f2c6859fb84971cd Eric: finish AbstractConverter
fa5d416efdcbdba766c0c9bd0797bd4b8bbe0273 sameeran: fix lit testing
b938eaec55b0d724de5a7d123364968df60c9c1f Eric: add BoxValue
0df6f8fe8ed09d52af293b1d548a73f0672ece70 no-op: fix F5.3 formatting
b5d51c24488b5955700f29e40cfb4c5fb4241f76 Eric: add SymbolMap
a20d48d7d39892ed2af2b0e6dd7f9703a3fef031 no-op: DATA 4/4
4171f80d5416eccbeebe8864410d576d7dc61eaa no-op: DATA 3/4
286d7a21593f48ef72d4205036017d326281e3b8 no-op: DATA 2/4
d1862eb8457f517ef5f4c5667bbf15053ab933f8 no-op: DATA 1/4
27505565515ee8b680cfca3ca32211b2564a6a66 no-op: roll up runtime fixes
3aee64a9e038814a6d4c64d37d35e5ccf27e4934 no-op: fix osx build
3ed2909feb34e5b68c6272def7d445a7ca4c5c6f Pete: fix crash alternate returns
f1fa3b7f6ee958ec4dfb7104bd0ae64ec0061551 Jean: AMAX0 &c. rewrite
3d627d6ff9be386ed32b3858a901773221f55761 no-op: more CHARACTER runtime
b46e2548b67de40acf33b5dde95077698995576f Eric: fix build
f392b75fd8539e07b1bc9ba16a0fe34b18b789e8 no-op: fix build
30db1776935ef921314937313fe9ec9dac48b693 Eric: Mangler module
93f602b339f62e058ce2c212c86f9f0ca3b20126 sameeran: google unittests
4741835e031b559f2effcad70f59e35c32c1eece Eric: fir.do_loop helper class
bb2f6f66c7f3189a3f9d2ea22ed9be6a3b8f5458 Pete: test for spec exprs
a0226f9bffa4c879ec7f8183738205661978cc39 no-op pmk: dodge bogus g++ 10.1 warning
70ad73b6b76838bd7c72123922102b175e5d478a sameeran: select type
8bba0bca721d66a63709d427ff1e3b48cf7c2cad Eric: complex expr helper class
a27d3852095a461b739da534ddc9abfb625f2e06 Tim: Type def'n name res. bug fix
bb73d1b278eb478ca8e56153cf1469bf7eb13a3f Isuru: Fix missing config.h
3862cbbc652be3dd731e75500f971e21d8355462 Isuru: "Use LLVM's flags"
4d8c00c0595b6998e41373afadaaca3f51ae2cf8 Pete: fix crash on erroneous exprs
1746c8ed2660c83895c79de94453f44f8e729a94 Pete: fix crash: forward-ref'd len
baa12ddb6fa6840c1125f0aa11cd0e05fe82385d Eric: type conversions
38674030c026b6ba432dc81440bd3790d94b7c48 Val C.: Better WAR for gcc warning
3d9bb031d13c884122a5da456659e47dd52ec1f7 Val C.: dodge buggy gcc warning
62b127eef6b37a57a647050b0e123f6ac928215f Jean: IsConstantExpr fix
70f1b4b4122088c1bd7324b519bc449dbfeaf298 Anchu: DATA statements
81bf1e29aae5992db318803ba4722a585ad64638 Truby: release build flags
ae6e499d258c24fde433d02793c327367c402d50 Eric: OpenMP lowering stubs
14f49599ccafc7e318fac609387c4dd68430925f no-op Tim: reduce dependencies
fbac9ce226d7a27e418fdeac72a0b3c9f2c48742 Eric: PFT
c4dbe59ae8253d73b63e5fcce0bc8bc44b4d07b5 Pete: declaring procedure entities
38095549c6a12a75794595464fa9b95f5c6dcf35 Pete: C751-C760 D/79798
b1ae13b4e9798ecfe8803513490b9034bda2e693 mlir build fix
4ead2cf76c4a1df260e7dff0fa767074bae6e2b8 mlir D/69940
85725a67c745cb833174a7eae2aa53e74753bcb1 clementval: openmp D/77821
661b234cbcfb0195fb998b86815e89895b38b88a mlir D/79517
6f300105d21e1f3bf7f0f92c2564c29f0cab8fb9 Tim: Fix IMPORT bug D/79737
99aa87a5b5371b3c06480e3ff99dcc4f2adf2c2a Tim: testing scripts D/79634
63a4fdda8c33174dc9fc80fed385df759abbf14f Fix build D/79723
b05c8c5756e473e9ec51ed65869f6ed42c552404 Tim: ass't conversions D/79637
332e6aea37a2777c06eb7d0960edf33b5869b0de sameeran: SELECT RANK D/78623
5eae715a3115be2640d0fd37d0bd4771abf2ab9b mlir D/79463
cc4768f2ec7ca1e6421c18afeface61376e9fab7 sameeran: documentation
7ccc7e56724974a27c8ada44f3cf0be0b5b1f4c2 Tim: fix IsDescriptor
54b35c066417d4856e9d53313f7e98b354274584 Tim: align -> alignment
07b69dcf66776a6a340c5b1b49ca8a36e712026d Pete: message edited again
cfce9b67609f4d2c91ac9c6ab51931769903a560 Pete: message edited
d5c05ced82ff698fad3da0537cf9b7cdb38dce85 no-op: Tim accessors
237d0e3c0416abf9919406bcc92874cfd15f5e0c no-op: Tim size/offset
0195b3a9098eba9349f4291606581669b2bef548 Tim fixes testing in standalone build
8d0c3c05f2f4b9e827eff98b7a375d174a163570 Pete: C741-C750
f432154d1bcfd61c9a8fcef9559917696fa09233 LLVM_LINK_COMPONENTS
1165a35a7312ccd723bbe3e5fe95cd3a3109ec66 IndexedAccessorRange
6fec2c4402ce34edc5c27202422007b12bb25797 no-op
b6f1bad630faa86104703f40c33a7653668e6a4a
d93ae65253e07fd8e96224620840e1ed144dc81f
7875362986fcdb40230b8a142e8288eeb6d547eb
0752d98ccf8771b41718170d46d11f4020b62818
bb1d976febf25e272a9f7ae51974207232481e3e
bc0342383dde329ab2bb07085900a533f0c053db
7c221a7d4fbce512656d9df202972230eb088f37
ed5363a6747b7e7914efa216b82438124587c862
3119bdb5d6955e85ddb45e9319608fa8a5915330
52492e6c430aa47836d28d7811961a1eb377ec49
75c31057a76228dea73aff100e7403c0e9a00c30
b547e1a4d163721b2dc3be869a3f06c6203217dc
807fe05d3531cae47d0c770b2d919f861bfe9235
3a1afd8c3d4bb5ded8262697c1aaebfd96e2a319
5339029ff79c0b6a501ef6bb7baeb07cb099f0b7
fc0262419a8647c44fe8712ee8e2d4de077f2bde
c353ebbfa4cb30a823fd850de97cb1ef559a05cc
4ced7a48e68a89257ee3c58a460d1bcdbf1e9447
9623003e9380e649bff0ebee3f11903ccf75af12
026d8807f439754d0ac8e600c1c40538b1a16f02
a6c1692cb30e62c94513c2c6262cd76df92ef892
0535fab2375ef71302bc0cf8e5d2ee3280b81f7d
c1c01212c49a0792c0594662db84be271e29cba6
2d6b9dbfef55364fc762682cd8ab93045582944a
29e71ceaee1a7a27d194100f0d94eb4d49496529
ebf190fcda0b8b4e9de405ba13ddbc679550644b
2f21a579665d44330b964cb47eece8bb9ab5a90c
d58a405de656e53424086aa4ab97db56d43deb36
ed6c452edc8121e18ec977a4ac93ab43d95fe78d
413467f9ec3d2e10585ddd171cb54114f97d01c8

Not cherry-picked:
5c37b2a5eee49df2545a6455eec64fb4b105df40 revert 7f1e776...
7f1e7767952233d1b6af1feef1371d127de5fa50 Val C.: OMP thing
64b04e4754bfe7bf718e5140fe1fd0ca50373c28 reversion of...
b32401464f4c9c9d43a3ddcb351cb6c7c713fdb4 Kiran: OMP 5.0 flush construct
9362698450d1843e7fde98d8012a7308244c2d79 Truby: change DIE to llvm_unreachable
89c7d9633b3f2255ed711522f29751566a6f5d70
a1726e65bc1fdbd2800839e48e68cb4a68cc7092
